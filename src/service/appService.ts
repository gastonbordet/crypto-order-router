/* eslint-disable @typescript-eslint/no-unused-vars */
import { BestPairPrice } from "../domain/models/bestPairPrice";
import OrderRouterService from "../domain/ports/OrderRouterService";
import ExchangeClient from "../domain/ports/exchangeClient";

const MOCK_DATA = {
    "lastUpdateId": 44665631349,
    "bids": [
        [
            "61956.60000000",
            "0.25497000"
        ],
        [
            "61955.00000000",
            "0.06470000"
        ],
        [
            "61953.14000000",
            "0.02541000"
        ],
        [
            "61952.49000000",
            "0.00500000"
        ],
        [
            "61952.01000000",
            "0.09608000"
        ],
        [
            "61952.00000000",
            "0.07110000"
        ],
        [
            "61951.80000000",
            "0.06470000"
        ],
        [
            "61951.47000000",
            "0.02418000"
        ],
        [
            "61950.00000000",
            "0.00095000"
        ],
        [
            "61949.99000000",
            "0.00666000"
        ],
        [
            "61949.96000000",
            "0.02250000"
        ],
        [
            "61948.02000000",
            "0.16209000"
        ],
        [
            "61948.01000000",
            "0.27000000"
        ],
        [
            "61948.00000000",
            "0.07110000"
        ],
        [
            "61947.20000000",
            "0.08643000"
        ],
        [
            "61946.80000000",
            "0.00037000"
        ],
        [
            "61944.45000000",
            "0.04266000"
        ],
        [
            "61944.44000000",
            "0.00403000"
        ],
        [
            "61944.00000000",
            "0.07110000"
        ],
        [
            "61943.35000000",
            "0.03119000"
        ],
        [
            "61941.29000000",
            "0.54760000"
        ],
        [
            "61941.28000000",
            "0.70571000"
        ],
        [
            "61941.25000000",
            "0.08643000"
        ],
        [
            "61941.10000000",
            "0.12911000"
        ],
        [
            "61940.71000000",
            "0.04800000"
        ],
        [
            "61940.70000000",
            "0.91256000"
        ],
        [
            "61940.64000000",
            "0.00018000"
        ],
        [
            "61940.48000000",
            "0.32813000"
        ],
        [
            "61940.00000000",
            "0.07110000"
        ],
        [
            "61939.49000000",
            "0.00242000"
        ]
    ],
    "asks": [
        [
            "61956.61000000",
            "1.80671000"
        ],
        [
            "61957.26000000",
            "0.10220000"
        ],
        [
            "61958.20000000",
            "0.06470000"
        ],
        [
            "61958.38000000",
            "0.02420000"
        ],
        [
            "61958.99000000",
            "0.12001000"
        ],
        [
            "61959.00000000",
            "0.20000000"
        ],
        [
            "61959.08000000",
            "0.06102000"
        ],
        [
            "61959.57000000",
            "0.23433000"
        ],
        [
            "61959.80000000",
            "0.06470000"
        ],
        [
            "61959.88000000",
            "0.20000000"
        ],
        [
            "61960.00000000",
            "0.07110000"
        ],
        [
            "61962.99000000",
            "0.03882000"
        ],
        [
            "61963.00000000",
            "0.06470000"
        ],
        [
            "61964.00000000",
            "0.07110000"
        ],
        [
            "61964.60000000",
            "0.06470000"
        ],
        [
            "61964.71000000",
            "0.10000000"
        ],
        [
            "61964.81000000",
            "0.56781000"
        ],
        [
            "61965.03000000",
            "0.15492000"
        ],
        [
            "61965.15000000",
            "0.00850000"
        ],
        [
            "61965.29000000",
            "0.00016000"
        ],
        [
            "61965.48000000",
            "0.44854000"
        ],
        [
            "61965.49000000",
            "0.10000000"
        ],
        [
            "61965.52000000",
            "0.32300000"
        ],
        [
            "61965.57000000",
            "0.09150000"
        ],
        [
            "61965.61000000",
            "0.40632000"
        ],
        [
            "61965.82000000",
            "0.10000000"
        ],
        [
            "61965.83000000",
            "0.04000000"
        ],
        [
            "61965.92000000",
            "0.00056000"
        ],
        [
            "61966.09000000",
            "0.04857000"
        ],
        [
            "61966.20000000",
            "0.06470000"
        ]
    ]
};


export default class AppService implements OrderRouterService {
    private readonly client: ExchangeClient;

    constructor(client: ExchangeClient) {
        this.client = client;
    }

    async getBestPairPrice(pair: string, amount: number): Promise<BestPairPrice> {
        return new Promise(() => ({pair: pair, amount: amount, price: 123}));
    }

    async getAvgPrice(pair: string): Promise<string> {
        const avgPrice = await this.client.getPairAvgPrice(pair);
        return `${pair} avg price: ${avgPrice.price}`;
    }
}
